<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…«å­—MBTI - å‘½è¿ä¸æ€§æ ¼è§£ç </title>
    <script src="https://cdn.jsdelivr.net/npm/lunar-javascript/lunar.js"></script>
    <style>
        body { font-family: 'Helvetica Neue', sans-serif; background: #f4f4f5; color: #333; padding: 20px; max-width: 600px; margin: 0 auto; }
        .card { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); margin-bottom: 20px; }
        h1 { text-align: center; color: #2c3e50; }
        label { display: block; margin-bottom: 8px; font-weight: bold; }
        input, select, button { width: 100%; padding: 12px; margin-bottom: 16px; border: 1px solid #ddd; border-radius: 8px; font-size: 16px; box-sizing: border-box;}
        button { background: #000; color: white; border: none; cursor: pointer; font-weight: bold; }
        button:hover { background: #333; }
        .result-box { display: none; background: #fafafa; padding: 15px; border-radius: 8px; border-left: 4px solid #000; }
        .highlight { color: #d9534f; font-weight: bold; }
        .tag { display: inline-block; background: #eee; padding: 4px 8px; border-radius: 4px; font-size: 12px; margin-right: 5px; margin-bottom: 5px;}
    </style>
</head>
<body>

    <h1>ğŸ”® å‘½è¿(å…«å­—) x æ€§æ ¼(MBTI)</h1>
    
    <div class="card">
        <label>ä½ çš„å‡ºç”Ÿæ—¥æœŸ (å…¬å†)</label>
        <input type="datetime-local" id="birthDate" value="2003-07-17T09:50">
        
        <label>ä½ çš„ MBTI ç±»å‹</label>
        <select id="mbti">
            <option value="INFP">INFP (è°ƒåœè€…)</option>
            <option value="INFJ">INFJ (æå€¡è€…)</option>
            <option value="ENFP">ENFP (ç«é€‰è€…)</option>
            <option value="INTJ">INTJ (å»ºç­‘å¸ˆ)</option>
            </select>

        <button onclick="analyze()">å¼€å§‹è§£ç </button>
    </div>

    <div id="result" class="card result-box">
        <h3>ğŸ“Š åˆ†æç»“æœ</h3>
        <p>ä½ çš„å…«å­—æ—¥ä¸»ï¼š<span id="dayMaster" class="highlight">--</span></p>
        <p>æ ¸å¿ƒæ ¼å±€ï¼š<span id="pattern" class="highlight">--</span></p>
        <hr>
        <div id="aiPrompt" style="font-size: 14px; color: #666; background: #eee; padding: 10px; border-radius: 5px;">
            (è¿™é‡Œä¼šç”Ÿæˆç»™AIçš„æç¤ºè¯ï¼Œä½ å¯ä»¥å¤åˆ¶å»é—®DeepSeek)
        </div>
    </div>

    <script>
        function analyze() {
            // 1. è·å–ç”¨æˆ·è¾“å…¥
            const dateStr = document.getElementById('birthDate').value;
            const mbti = document.getElementById('mbti').value;
            
            if(!dateStr) return alert("è¯·é€‰æ‹©æ—¥æœŸ");

            // 2. è°ƒç”¨ lunar åº“è®¡ç®—å…«å­—
            const d = new Date(dateStr);
            const solar = Solar.fromYmdHms(d.getFullYear(), d.getMonth()+1, d.getDate(), d.getHours(), d.getMinutes(), 0);
            const lunar = solar.getLunar();
            const bazi = lunar.getBaZi();
            
            // è·å–æ—¥ä¸» (Day Master)
            const dayMaster = bazi[2].substring(0, 1); // æ—¥æŸ±çš„å¤©å¹²
            const dayMasterElement = LunarUtil.WU_XING_GAN[dayMaster]; // äº”è¡Œ

            // è·å–ç®€å•çš„åç¥ (è¿™é‡Œåšç®€åŒ–çš„æ¼”ç¤ºï¼ŒæŠ“å–æœˆå¹²çš„åç¥)
            // æ³¨æ„ï¼šlunaråº“çš„åç¥è®¡ç®—æ¯”è¾ƒå¤æ‚ï¼Œè¿™é‡Œä¸ºäº†æ¼”ç¤ºï¼Œæˆ‘ä»¬å…ˆè¾“å‡ºå…«å­—ç»“æ„
            const yearGan = bazi[0].substring(0,1);
            const monthGan = bazi[1].substring(0,1);
            
            // æ˜¾ç¤ºç»“æœ
            document.getElementById('result').style.display = 'block';
            document.getElementById('dayMaster').innerText = `${dayMaster} (${dayMasterElement})`;
            document.getElementById('pattern').innerText = `æœˆå¹²: ${monthGan} | å¹´å¹²: ${yearGan}`;

            // 3. ç”Ÿæˆ Prompt
            const prompt = `æˆ‘æ˜¯ä¸€ä¸ª${mbti}ï¼Œæˆ‘çš„å…«å­—æ—¥ä¸»æ˜¯ã€${dayMaster}${dayMasterElement}ã€‘ï¼Œå‡ºç”Ÿåœ¨${lunar.getMonthInChinese()}æœˆã€‚è¯·å¸®æˆ‘åˆ†ææˆ‘çš„æ€§æ ¼å†²çªç‚¹ã€‚`;
            
            document.getElementById('aiPrompt').innerText = "å¤åˆ¶è¿™æ®µè¯å‘ç»™ AIï¼š\n\n" + prompt;
        }
    </script>
</body>
</html>
