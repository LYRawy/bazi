<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI å‘½ç†å¤§å¸ˆ - æ·±åº¦è§£ç </title>
    <script src="https://cdn.jsdelivr.net/npm/lunar-javascript/lunar.js"></script>
    <style>
        :root { --primary: #6366f1; --bg: #f8fafc; --text: #334155; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: var(--bg); color: var(--text); padding: 20px; line-height: 1.6; }
        .container { max-width: 800px; margin: 0 auto; }
        
        /* å¡ç‰‡é£æ ¼ */
        .card { background: white; border-radius: 16px; padding: 24px; margin-bottom: 24px; box-shadow: 0 4px 20px rgba(0,0,0,0.05); }
        h1 { text-align: center; color: #1e293b; margin-bottom: 30px; font-size: 1.8rem; }
        h2 { font-size: 1.2rem; border-left: 4px solid var(--primary); padding-left: 10px; margin-bottom: 20px; color: #0f172a; }

        /* è¾“å…¥åŒº */
        .input-group { margin-bottom: 15px; }
        label { display: block; font-weight: 600; margin-bottom: 8px; font-size: 0.9rem; }
        input, select { width: 100%; padding: 12px; border: 1px solid #e2e8f0; border-radius: 8px; font-size: 16px; box-sizing: border-box; background: #fdfdfd; }
        button { width: 100%; padding: 14px; background: var(--primary); color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: bold; cursor: pointer; transition: 0.2s; }
        button:hover { background: #4f46e5; transform: translateY(-1px); }

        /* æ’ç›˜è¡¨æ ¼ */
        .bazi-chart { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; text-align: center; margin-bottom: 20px; }
        .pillar { background: #f1f5f9; padding: 15px 5px; border-radius: 8px; }
        .pillar-title { font-size: 0.8rem; color: #64748b; margin-bottom: 5px; }
        .gan { font-size: 1.4rem; font-weight: bold; color: #e11d48; } /* å¤©å¹²çº¢å­— */
        .zhi { font-size: 1.4rem; font-weight: bold; color: #334155; }
        .god { font-size: 0.7rem; color: #64748b; margin-top: 5px; }

        /* åˆ†ææŠ¥å‘ŠåŒº */
        .report-section { display: none; }
        .tag { display: inline-block; background: #e0e7ff; color: #4338ca; padding: 4px 12px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; margin-right: 8px; }
        .analysis-text { background: #fff; padding: 20px; border-radius: 12px; border: 1px dashed #cbd5e1; margin-top: 15px; white-space: pre-wrap; }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ”® AI å…¨æ¯å‘½ç†è§£ç </h1>
    
    <div class="card">
        <div class="input-group">
            <label>ğŸ“… ä½ çš„å‡ºç”Ÿæ—¶é—´ (å…¬å†)</label>
            <input type="datetime-local" id="birthDate" value="2003-07-17T09:50">
        </div>
        <div class="input-group">
            <label>ğŸ§  ä½ çš„ MBTI äººæ ¼</label>
            <select id="mbti">
                <option value="INFP">INFP (è°ƒåœè€…) - ç†æƒ³ä¸»ä¹‰</option>
                <option value="INFJ">INFJ (æå€¡è€…) - æ·±é‚ƒæ´å¯Ÿ</option>
                <option value="INTJ">INTJ (å»ºç­‘å¸ˆ) - æˆ˜ç•¥æ€ç»´</option>
                <option value="ENFP">ENFP (ç«é€‰è€…) - çƒ­æƒ…å¥”æ”¾</option>
                <option value="ENTP">ENTP (è¾©è®ºå®¶) - çµæ´»å¤šå˜</option>
            </select>
        </div>
        <button onclick="generateReport()">âœ¨ ç«‹å³ç”Ÿæˆä¸‡å­—è¯¦æ‰¹ (æ¨¡æ‹Ÿ)</button>
    </div>

    <div id="result" class="card report-section">
        <h2>ğŸ“Š å‘½ç›˜ç»“æ„</h2>
        <div class="bazi-chart">
            <div class="pillar">
                <div class="pillar-title">å¹´æŸ±</div>
                <div class="god" id="yearGod">--</div>
                <div class="gan" id="yearGan">--</div>
                <div class="zhi" id="yearZhi">--</div>
            </div>
            <div class="pillar">
                <div class="pillar-title">æœˆæŸ±</div>
                <div class="god" id="monthGod">--</div>
                <div class="gan" id="monthGan">--</div>
                <div class="zhi" id="monthZhi">--</div>
            </div>
            <div class="pillar">
                <div class="pillar-title">æ—¥æŸ± (æˆ‘)</div>
                <div class="god">æ—¥ä¸»</div>
                <div class="gan" id="dayGan">--</div>
                <div class="zhi" id="dayZhi">--</div>
            </div>
            <div class="pillar">
                <div class="pillar-title">æ—¶æŸ±</div>
                <div class="god" id="hourGod">--</div>
                <div class="gan" id="hourGan">--</div>
                <div class="zhi" id="hourZhi">--</div>
            </div>
        </div>

        <h2>ğŸ’¡ æ€§æ ¼æ·±åº¦åˆ†æ</h2>
        <div>
            <span class="tag" id="dayMasterTag">--</span>
            <span class="tag" id="mbtiTag">--</span>
            <span class="tag" id="patternTag">--</span>
        </div>
        
        <div class="analysis-text" id="aiReport">
            </div>
    </div>
</div>

<script>
    function generateReport() {
        const dateStr = document.getElementById('birthDate').value;
        const mbti = document.getElementById('mbti').value;
        if(!dateStr) return alert("è¯·å¡«å†™æ—¥æœŸ");

        // 1. è®¡ç®—å…«å­— (ä½¿ç”¨ lunar åº“)
        const d = new Date(dateStr);
        const solar = Solar.fromYmdHms(d.getFullYear(), d.getMonth()+1, d.getDate(), d.getHours(), d.getMinutes(), 0);
        const lunar = solar.getLunar();
        const bazi = lunar.getBaZi();
        
        // æå–å¹²æ”¯
        const pillars = {
            y: bazi[0], m: bazi[1], d: bazi[2], h: bazi[3]
        };

        // å¡«å……è¡¨æ ¼
        document.getElementById('yearGan').innerText = pillars.y.substring(0,1);
        document.getElementById('yearZhi').innerText = pillars.y.substring(1,2);
        document.getElementById('monthGan').innerText = pillars.m.substring(0,1);
        document.getElementById('monthZhi').innerText = pillars.m.substring(1,2);
        document.getElementById('dayGan').innerText = pillars.d.substring(0,1);
        document.getElementById('dayZhi').innerText = pillars.d.substring(1,2);
        document.getElementById('hourGan').innerText = pillars.h.substring(0,1);
        document.getElementById('hourZhi').innerText = pillars.h.substring(1,2);

        // ç®€å•çš„åç¥é€»è¾‘ (ä»…åšæ¼”ç¤ºï¼ŒçœŸå®æ’ç›˜æ›´å¤æ‚)
        // è¿™é‡Œä¸ºäº†æ•ˆæœï¼Œå…ˆéšæœºç”Ÿæˆå‡ ä¸ªåç¥å±•ç¤ºä¸€ä¸‹ "ä¸“ä¸šæ„Ÿ"
        const gods = ["ä¸ƒæ€", "æ­£å°", "é£Ÿç¥", "æ¯”è‚©", "åè´¢"];
        document.getElementById('yearGod').innerText = gods[Math.floor(Math.random()*5)];
        document.getElementById('monthGod').innerText = gods[Math.floor(Math.random()*5)];
        document.getElementById('hourGod').innerText = gods[Math.floor(Math.random()*5)];

        // æ˜¾ç¤ºç»“æœåŒºåŸŸ
        document.getElementById('result').style.display = 'block';
        
        // ç”Ÿæˆâ€œå‡â€çš„é•¿ç¯‡åˆ†æ (çœŸå®é¡¹ç›®è¿™é‡Œéœ€è¦è¿æ¥ DeepSeek API)
        const dayMaster = pillars.d.substring(0,1);
        const desc = getMockAnalysis(dayMaster, mbti);
        
        document.getElementById('dayMasterTag').innerText = `æ—¥ä¸»: ${dayMaster}`;
        document.getElementById('mbtiTag').innerText = `äººæ ¼: ${mbti}`;
        document.getElementById('patternTag').innerText = `æ ¼å±€: æœˆä»¤æçº²`;
        
        typeWriter(desc, 'aiReport');
    }

    // è¿™æ˜¯ä¸€ä¸ªâ€œæ¨¡æ‹Ÿâ€AIç”Ÿæˆé•¿æ–‡çš„å‡½æ•°
    function getMockAnalysis(dm, mbti) {
        return `ã€å‘½ç†ç»¼è¿°ã€‘ï¼š\nä½ ç°åœ¨çš„å…«å­—æ—¥ä¸»æ˜¯ã€Œ${dm}ã€ï¼Œé…åˆã€Œ${mbti}ã€çš„æ€§æ ¼åº•è‰²ï¼Œå‘ˆç°å‡ºä¸€ç§ç‹¬ç‰¹çš„çŸ›ç›¾ç¾æ„Ÿã€‚\n\n1. æ ¸å¿ƒèƒ½é‡åœºåˆ†æï¼š\n${dm}ä»£è¡¨äº†ä½ çš„æ ¸å¿ƒé©±åŠ¨åŠ›ã€‚å¦‚æœæ˜¯åœ¨å¤å¤©å‡ºç”Ÿï¼Œä½ çš„èƒ½é‡å¦‚çƒˆç«çƒ¹æ²¹ï¼Œçƒ­æƒ…ä½†å®¹æ˜“æ€¥èºï¼›å¦‚æœæ˜¯å†¬å¤©ï¼Œåˆ™å†…æ•›æ·±æ²‰ã€‚ç»“åˆ${mbti}çš„ç‰¹è´¨ï¼Œä½ å¾€å¾€åœ¨äººç¾¤ä¸­è¡¨ç°å¾—æ—¢æƒ³èå…¥åˆä¿æŒç–ç¦»ã€‚\n\n2. äº‹ä¸šä¸è´¢è¿è§£ç ï¼š\nä½ çš„å‘½ç›˜æ˜¾ç¤ºï¼Œæœˆä»¤èƒ½é‡å¯¹ä½ å½±å“å·¨å¤§ã€‚åœ¨èŒåœºä¸Šï¼Œä½ å¹¶ä¸é€‚åˆæœºæ¢°é‡å¤çš„å·¥ä½œï¼Œä½ éœ€è¦çš„æ˜¯åˆ›æ„å’Œè‡ªç”±ã€‚${mbti}çš„ç›´è§‰åŠŸèƒ½ï¼ˆNï¼‰è®©ä½ èƒ½çœ‹åˆ°æœªæ¥çš„è¶‹åŠ¿ï¼Œå»ºè®®åœ¨â€œç«â€æˆ–â€œæœ¨â€ç›¸å…³çš„è¡Œä¸šå‘å±•ï¼ˆå¦‚äº’è”ç½‘ã€æ–‡åŒ–ä¼ åª’ï¼‰ã€‚\n\n3. æƒ…æ„Ÿæ¨¡å¼ï¼š\nåœ¨äº²å¯†å…³ç³»ä¸­ï¼Œä½ å®¹æ˜“é™·å…¥â€œä»˜å‡ºå‹â€çš„é™·é˜±ã€‚æ—¥æ”¯åä¸‹çš„èƒ½é‡æ˜¾ç¤ºï¼Œä½ æ¸´æœ›ä¸€ä¸ªèƒ½ç²¾ç¥å…±é¸£çš„ä¼´ä¾£ï¼Œè€Œä¸æ˜¯å•çº¯çš„ç‰©è´¨ä¾›å…»è€…ã€‚æ³¨æ„æµå¹´å¸¦æ¥çš„æƒ…ç»ªæ³¢åŠ¨ï¼Œç‰¹åˆ«æ˜¯åœ¨è½¬è§’çš„å¤§è¿å¹´ä»½ã€‚\n\n(æ³¨ï¼šè¿™åªæ˜¯ä¸€ä¸ªé™æ€æ¨¡ç‰ˆæ¼”ç¤ºã€‚å¦‚æœä½ æƒ³çœ‹åˆ°çœŸæ­£çš„â€œé’ˆå¯¹ä½ ä¸ªäººçš„ä¸‡å­—è¯¦æ‰¹â€ï¼Œä¸‹ä¸€æ­¥æˆ‘ä»¬éœ€è¦å°†è¿™ä¸ªç½‘é¡µè¿æ¥åˆ° DeepSeek çš„ API æ¥å£ã€‚)`;
    }

    // æ‰“å­—æœºæ•ˆæœ
    function typeWriter(text, elementId) {
        const el = document.getElementById(elementId);
        el.innerText = "";
        let i = 0;
        function type() {
            if (i < text.length) {
                el.innerText += text.charAt(i);
                i++;
                setTimeout(type, 20); // æ‰“å­—é€Ÿåº¦
            }
        }
        type();
    }
</script>
</body>
</html>
